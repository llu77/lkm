================================================================================
أين البرنامج؟ - إجابة مباشرة
Where is the Program? - Direct Answer
================================================================================

السؤال: البرنامج في كلاودفلار ام كونفيكس؟
الجواب: في الاثنين! البرنامج مقسم لجزئين:

================================================================================
1. Frontend (الواجهة) - في Cloudflare Pages
================================================================================

ما هو؟
--------
الصفحات والأزرار والقوائم - كل ما تراه في المتصفح

المجلد:
--------
src/ ← كل الكود هنا

التقنيات:
----------
- React (المكتبة)
- TypeScript (اللغة)
- Vite (أداة البناء)

أين يُنشر؟
-----------
☁️ Cloudflare Pages
https://your-site.pages.dev

كيف يُنشر؟
-----------
1. npm run build (يبني الكود)
2. Git push (يرفع التغييرات)
3. Cloudflare يبني وينشر تلقائياً

المتغيرات المطلوبة:
--------------------
VITE_CONVEX_URL = https://smiling-dinosaur-349.convex.cloud
VITE_DEV_MODE = true
VITE_PAYROLL_PASSWORD = Omar1010#
VITE_EMPLOYEES_PASSWORD = Omar1010#
VITE_APP_URL = https://your-site.pages.dev

أين تضيفها؟
------------
Cloudflare Dashboard → Workers & Pages → Settings → Environment variables

================================================================================
2. Backend (الخادم) - في Convex Cloud
================================================================================

ما هو؟
--------
قاعدة البيانات + المنطق البرمجي + الأمان + الحسابات

المجلد:
--------
convex/ ← كل الكود هنا

التقنيات:
----------
- Convex Runtime
- TypeScript
- 18 جدول في قاعدة البيانات

أين يعمل؟
----------
🔧 Convex Cloud
https://smiling-dinosaur-349.convex.cloud

كيف يُنشر؟
-----------
مرفوع مسبقاً! ✅
يتحدث تلقائياً عند: npx convex deploy

المتغيرات المطلوبة:
--------------------
npx convex env set MANAGE_REQUESTS_PASSWORD "Omar1010#"
npx convex env set SUPERVISOR_EMAIL_1010 "labn@company.com"
npx convex env set SUPERVISOR_EMAIL_2020 "tuwaiq@company.com"
npx convex env set DEFAULT_SUPERVISOR_EMAIL "admin@company.com"
npx convex env set VITE_APP_URL "https://your-site.pages.dev"

الاختيارية:
-----------
npx convex env set RESEND_API_KEY "re_xxxxx"
npx convex env set ZAPIER_WEBHOOK_URL "https://hooks.zapier.com/..."
npx convex env set ANTHROPIC_API_KEY "sk-ant-api03-xxxxx"

قاعدة البيانات:
----------------
18 جدول:
- branches (الفروع)
- employees (الموظفين)
- payrollRecords (مسيرات الرواتب)
- advances (السلف)
- deductions (الخصومات)
- bonuses (المكافآت)
- revenues (الإيرادات)
- expenses (المصاريف)
- employeeRequests (طلبات الموظفين)
- ... وغيرها

================================================================================
3. كيف يتواصل Frontend و Backend؟
================================================================================

الطريقة:
---------
Frontend (Cloudflare) يستدعي Backend (Convex) عبر API

المثال:
-------
// في Frontend
const employees = useQuery(api.employees.getAll);
                            ↓
                    يرسل طلب HTTP
                            ↓
         https://smiling-dinosaur-349.convex.cloud/api/...
                            ↓
                    Backend يعالج
                            ↓
                   يرجع البيانات JSON
                            ↓
               Frontend يعرض البيانات

================================================================================
4. الفرق الرئيسي:
================================================================================

Frontend (Cloudflare):
----------------------
- ملفات ثابتة (HTML, JavaScript, CSS)
- بدون قاعدة بيانات
- بدون منطق حساسات
- يعرض فقط

Backend (Convex):
-----------------
- قاعدة بيانات كاملة
- منطق برمجي
- كلمات مرور آمنة
- يعالج ويحفظ

================================================================================
5. ما دخل Convex؟
================================================================================

السؤال: لماذا نستخدم Convex؟
الجواب: لأنه:

✅ Backend-as-a-Service (خادم جاهز)
✅ قاعدة بيانات بدون إعداد
✅ API جاهز تلقائياً
✅ Real-time sync (تحديث فوري)
✅ TypeScript من البداية
✅ مجاني للبداية

البديل:
--------
لو لم نستخدم Convex، كنا سنحتاج:
- إعداد سيرفر (AWS, DigitalOcean, ...)
- إعداد قاعدة بيانات (MongoDB, PostgreSQL, ...)
- كتابة API من الصفر
- إعداد الأمان
- الصيانة المستمرة

مع Convex:
-----------
كل شيء جاهز! فقط اكتب الكود ✅

================================================================================
6. خطوات النشر الكاملة:
================================================================================

Backend (Convex):
-----------------
✅ مرفوع مسبقاً على: https://smiling-dinosaur-349.convex.cloud
✅ 18 جدول موجودة
⚠️ فقط أضف المتغيرات:
   npx convex env set MANAGE_REQUESTS_PASSWORD "Omar1010#"
   npx convex env set SUPERVISOR_EMAIL_1010 "labn@company.com"
   npx convex env set SUPERVISOR_EMAIL_2020 "tuwaiq@company.com"
   npx convex env set DEFAULT_SUPERVISOR_EMAIL "admin@company.com"

Frontend (Cloudflare):
----------------------
⚠️ يحتاج إعداد:
1. أضف المتغيرات الخمسة في Cloudflare Dashboard
2. أعد النشر (Retry deployment)
3. انتظر البناء (2-3 دقائق)
4. افتح الموقع

================================================================================
7. البنية المختصرة:
================================================================================

المستخدم
    ↓
يفتح المتصفح
    ↓
https://your-site.pages.dev ← Cloudflare Pages (Frontend)
    ↓
يستدعي API
    ↓
https://smiling-dinosaur-349.convex.cloud ← Convex Cloud (Backend)
    ↓
يعالج ويرجع البيانات
    ↓
Frontend يعرض النتيجة

================================================================================
8. الملفات في المشروع:
================================================================================

/home/user/lkm/
├── src/                    ← Frontend → Cloudflare
│   ├── pages/             ← الصفحات
│   └── components/        ← المكونات
│
├── convex/                 ← Backend → Convex
│   ├── employees.ts       ← إدارة الموظفين
│   ├── payroll.ts         ← حساب الرواتب
│   └── schema.ts          ← قاعدة البيانات
│
├── public/                 ← ملفات ثابتة → Cloudflare
├── dist/                   ← ناتج البناء → Cloudflare
└── .env.local              ← للتطوير المحلي فقط

================================================================================
9. الخلاصة النهائية:
================================================================================

البرنامج في مكانين:

1. Cloudflare Pages (Frontend):
   - الواجهة والصفحات
   - https://your-site.pages.dev
   - يحتاج: المتغيرات الخمسة

2. Convex Cloud (Backend):
   - قاعدة البيانات والمنطق
   - https://smiling-dinosaur-349.convex.cloud
   - مرفوع ويعمل! ✅
   - فقط يحتاج: المتغيرات الإضافية

================================================================================
10. ما تحتاج فعله الآن:
================================================================================

الخطوة 1: إعداد Convex (5 دقائق)
------------------------------------
npx convex env set MANAGE_REQUESTS_PASSWORD "Omar1010#"
npx convex env set SUPERVISOR_EMAIL_1010 "labn@company.com"
npx convex env set SUPERVISOR_EMAIL_2020 "tuwaiq@company.com"
npx convex env set DEFAULT_SUPERVISOR_EMAIL "admin@company.com"

الخطوة 2: إعداد Cloudflare (5 دقائق)
---------------------------------------
1. افتح: Cloudflare Dashboard
2. أضف المتغيرات الخمسة
3. أعد النشر

الخطوة 3: اختبر (دقيقة واحدة)
--------------------------------
1. افتح: https://your-site.pages.dev
2. يجب أن يعمل! ✅

================================================================================
للتفاصيل الكاملة: اقرأ PROJECT_ARCHITECTURE_AR.md
================================================================================

تم بواسطة: Claude Code
تاريخ: 2025-10-25
================================================================================
