# ๐๏ธ ุญุงูุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช - Database Status
## Convex Backend Configuration

**ุชุงุฑูุฎ:** 2025-10-25
**ุงูุญุงูุฉ:** โ ูุฑุจูุทุฉ ูููุนุฏูุฉ ุจุงููุงูู

---

## โ ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุฑุจูุทุฉ ุจูุฌุงุญ!

ูุนูุ ูุงุนุฏุฉ ุงูุจูุงูุงุช **Convex** ูุฑุจูุทุฉ ุจุงููุดุฑูุน ูุฌุงูุฒุฉ ููุนูู!

---

## ๐ ูุนูููุงุช ุงูุงุชุตุงู

### Convex Deployment URL:
```
https://smiling-dinosaur-349.convex.cloud
```

### Deployment ID:
```
eyJ2MiI6IjM5YTQ2NmYzZWQ5YTRmZDViZDczNjQzZmI1ODkzMTNhIn0=
```

### Configuration File:
```
.env.local โ
```

---

## ๐๏ธ ูููู ูุงุนุฏุฉ ุงูุจูุงูุงุช (18 ุฌุฏูู)

### 1. ุงูุฌุฏุงูู ุงูุฑุฆูุณูุฉ:

#### ๐ ุงููุงููุฉ ูุงูุฅูุฑุงุฏุงุช:
- โ **revenues** - ุงูุฅูุฑุงุฏุงุช ุงูููููุฉ (ูุงุดุ ุดุจูุฉุ ุจุฏุฌุช)
- โ **expenses** - ุงููุตุฑููุงุช
- โ **bonusRecords** - ุณุฌูุงุช ุงูุจููุต ุงูุฃุณุจูุนู

#### ๐ฅ ุงูููุธููู:
- โ **employees** - ุจูุงูุงุช ุงูููุธููู (ุฑุงุชุจุ ุจุฏูุงุชุ ุญุงูุฉ)
- โ **advances** - ุงูุณูู ุงูุดูุฑูุฉ
- โ **deductions** - ุงูุฎุตููุงุช ูุงููุณุชุญูุงุช
- โ **payrollRecords** - ูุณูุฑุงุช ุงูุฑูุงุชุจ ุงูุดูุฑูุฉ

#### ๐ ุงูุทูุจุงุช:
- โ **employeeRequests** - ุทูุจุงุช ุงูููุธููู (ุณููุฉุ ุฅุฌุงุฒุฉุ ุงุณุชุฆุฐุงูุ ุฅูุฎ)
- โ **employeeOrders** - ุทูุจุงุช ุนุงูุฉ
- โ **productOrders** - ุทูุจุงุช ุงูููุชุฌุงุช

#### ๐ข ุงูุฅุฏุงุฑุฉ:
- โ **branches** - ุงููุฑูุน (ูุจูุ ุทููู)
- โ **users** - ุงููุณุชุฎุฏููู ูุงูุตูุงุญูุงุช
- โ **notifications** - ุงูุฅุดุนุงุฑุงุช ุงูุฐููุฉ

#### ๐ง ุงูุจุฑูุฏ ูุงูุชูุงูู:
- โ **emailLogs** - ุณุฌูุงุช ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- โ **emailSettings** - ุฅุนุฏุงุฏุงุช ุงูุจุฑูุฏ
- โ **zapierWebhooks** - ุชูุงููุงุช Zapier
- โ **zapierLogs** - ุณุฌูุงุช Zapier

#### ๐ ุงููุธุงู:
- โ **backups** - ุงููุณุฎ ุงูุงุญุชูุงุทูุฉ ุงูููููุฉ

---

## ๐ ุงูุฑุจุท ูุน Frontend

### ูู ููู .env.local:
```env
VITE_CONVEX_URL=https://smiling-dinosaur-349.convex.cloud
CONVEX_DEPLOYMENT=eyJ2MiI6IjM5YTQ2NmYzZWQ5YTRmZDViZDczNjQzZmI1ODkzMTNhIn0=
```

### ูู ุงูููุฏ (src/main.tsx):
```typescript
import { ConvexProvider, ConvexReactClient } from "convex/react";

const convex = new ConvexReactClient(import.meta.env.VITE_CONVEX_URL);

// ูุชุตู ุชููุงุฆูุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช โ
```

---

## ๐ ูููุงุช Backend (30 ููู)

ุงููููุงุช ุงูููุฌูุฏุฉ ูู `convex/`:

```
โ schema.ts              - ุชุนุฑูู ุฌููุน ุงูุฌุฏุงูู (18 ุฌุฏูู)
โ setup.ts               - ุฃุฏูุงุช ูุณุญ ูุฅุนุงุฏุฉ ุฅูุดุงุก ุงูุจูุงูุงุช
โ revenues.ts            - ุนูููุงุช ุงูุฅูุฑุงุฏุงุช
โ expenses.ts            - ุนูููุงุช ุงููุตุฑููุงุช
โ bonus.ts               - ูุธุงู ุงูุจููุต ุงูุฃุณุจูุนู
โ employees.ts           - ุฅุฏุงุฑุฉ ุงูููุธููู
โ advances.ts            - ุงูุณูู
โ deductions.ts          - ุงูุฎุตููุงุช
โ payroll.ts             - ูุณูุฑุงุช ุงูุฑูุงุชุจ
โ employeeRequests.ts    - ุทูุจุงุช ุงูููุธููู + ุงููุฒุงููุฉ ุงูุชููุงุฆูุฉ
โ productOrders.ts       - ุทูุจุงุช ุงูููุชุฌุงุช
โ branches.ts            - ุฅุฏุงุฑุฉ ุงููุฑูุน
โ users.ts               - ุงููุณุชุฎุฏููู
โ dashboard.ts           - ุจูุงูุงุช ุงูุฏุงุดุจูุฑุฏ
โ notifications.ts       - ุงูุฅุดุนุงุฑุงุช ุงูุฐููุฉ
โ emailSystem.ts         - ูุธุงู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
โ emailLogs.ts           - ุณุฌูุงุช ุงูุจุฑูุฏ
โ emailSettings.ts       - ุฅุนุฏุงุฏุงุช ุงูุจุฑูุฏ
โ zapier.ts              - ุชูุงููุงุช Zapier
โ zapierQueries.ts       - ุงุณุชุนูุงูุงุช Zapier
โ zapierHelper.ts        - ูุณุงุนุฏุงุช Zapier
โ crons.ts               - ุงูููุงู ุงููุฌุฏููุฉ
โ ai.ts                  - ุงูุชูุงูู ูุน Claude AI
โ pdfAgent.ts            - ุฅูุดุงุก PDF
โ migration.ts           - ุชุฑุญูู ุงูุจูุงูุงุช
โ clearRevenues.ts       - ูุณุญ ุงูุฅูุฑุงุฏุงุช
โ rateLimit.ts           - ุชุญุฏูุฏ ุงููุนุฏู
โ payrollAutomation.ts   - ุฃุชูุชุฉ ุงูุฑูุงุชุจ
โ payrollEmail.ts        - ุฅุฑุณุงู ูุณูุฑุงุช ุงูุฑูุงุชุจ
โ scheduledEmails.ts     - ุฌุฏููุฉ ุงูุจุฑูุฏ
```

**ุงููุฌููุน:** 30 ููู โ

---

## ๐ง ุงูุนูููุงุช ุงููุชุงุญุฉ

### 1. ุฅูุดุงุก ุงูุจูุงูุงุช (Mutations):
- โ ุฅูุดุงุก ุฅูุฑุงุฏุงุช
- โ ุฅูุดุงุก ูุตุฑููุงุช
- โ ุฅูุดุงุก ููุธู
- โ ุฅูุดุงุก ุทูุจ
- โ ุฅูุดุงุก ุณููุฉ/ุฎุตู
- โ ุฅูุดุงุก ูุณูุฑ ุฑุงุชุจ
- โ ุงูููุงููุฉ ุนูู ุงูุจููุต

### 2. ูุฑุงุกุฉ ุงูุจูุงูุงุช (Queries):
- โ ุฌูุจ ุงูุฅูุฑุงุฏุงุช
- โ ุฌูุจ ุงูููุธููู
- โ ุฌูุจ ุงูุทูุจุงุช
- โ ุฌูุจ ุงูุจููุต
- โ ุฅุญุตุงุฆูุงุช ุงูุฏุงุดุจูุฑุฏ
- โ ุงูุชูุงุฑูุฑ ุงููุงููุฉ

### 3. ุงูุชุญุฏูุซ ูุงูุญุฐู:
- โ ุชุญุฏูุซ ุญุงูุฉ ุงูุทูุจ
- โ ุญุฐู ุณุฌู
- โ ุชุนุฏูู ุจูุงูุงุช ุงูููุธู

### 4. ุงููุฒุงููุฉ ุงูุชููุงุฆูุฉ (ุฌุฏูุฏ!):
- โ ูุจูู ุทูุจ ุณููุฉ โ ุฅูุดุงุก ุณุฌู ูู advances ุชููุงุฆูุงู
- โ ูุจูู ุทูุจ ุตุฑู ูุชุฃุฎุฑุงุช โ ุฅูุดุงุก ุณุฌู ูู deductions ุชููุงุฆูุงู

---

## ๐๏ธ ุฃุฏูุงุช ุฅุฏุงุฑุฉ ุงูุจูุงูุงุช (ุฌุฏูุฏ!)

### ููู: convex/setup.ts

#### ูุณุญ ูู ุดูุก + ุฅุนุงุฏุฉ ุฅูุดุงุก ุงููุฑูุน:
```bash
npx convex run setup:resetDatabase '{"confirmationText": "RESET_DATABASE"}'
```

#### ูุณุญ ุฌุฏูู ูุงุญุฏ:
```bash
npx convex run setup:clearTableData '{"tableName": "revenues", "confirmationText": "CLEAR_TABLE"}'
```

#### ูุณุญ ูู ุดูุก ุจุฏูู ุฅุนุงุฏุฉ ุฅูุดุงุก:
```bash
npx convex run setup:clearAllData '{"confirmationText": "CLEAR_ALL_DATA"}'
```

#### ุฅูุดุงุก ุงููุฑูุน ุงูุฃุณุงุณูุฉ ููุท:
```bash
npx convex run setup:setupInitialData
```

---

## ๐ Environment Variables ุงููุทููุจุฉ

### ูู Convex Backend:
```bash
# ูุฌุจ ุชุนููููุง ูุฑุฉ ูุงุญุฏุฉ
npx convex env set MANAGE_REQUESTS_PASSWORD "Omar1010#"
```

### ูู Cloudflare Pages (Frontend):
```env
VITE_CONVEX_URL=https://smiling-dinosaur-349.convex.cloud
VITE_DEV_MODE=false
VITE_PAYROLL_PASSWORD=Omar1010#
VITE_EMPLOYEES_PASSWORD=Omar1010#
```

**โ๏ธ ููุงุญุธุฉ:** `VITE_MANAGE_REQUESTS_PASSWORD` ูู ุชุนุฏ ูุทููุจุฉ - ุชู ููููุง ููู backend!

---

## โ ุงูุชุญูู ูู ุงูุงุชุตุงู

### ุงูุทุฑููุฉ 1: ุนุจุฑ Frontend
```bash
npm run dev
```
ุงูุชุญ ุงููุชุตูุญ โ ุฅุฐุง ุธูุฑุช ุงูุจูุงูุงุช = ุงูุงุชุตุงู ูุนูู โ

### ุงูุทุฑููุฉ 2: ุนุจุฑ Convex Dev
```bash
npx convex dev
```
ุฅุฐุง ุฑุฃูุช "Convex functions ready" = ุงูุงุชุตุงู ูุนูู โ

### ุงูุทุฑููุฉ 3: ุนุจุฑ Dashboard
```bash
npx convex dashboard
```
ุณููุชุญ Convex Dashboard ูู ุงููุชุตูุญ โ

---

## ๐ ุจุนุฏ ุงููุดุฑ ุนูู Cloudflare

### ุณูุชุตู ุงููููุน ุงูููุดูุฑ ุจู Convex ุชููุงุฆูุงู:
```
Frontend (Cloudflare) โ VITE_CONVEX_URL โ Convex Database
```

### ูุง ุญุงุฌุฉ ูุฅุนุฏุงุฏุงุช ุฅุถุงููุฉ!
ููุท ุชุฃูุฏ ูู:
1. โ `VITE_CONVEX_URL` ููุฌูุฏ ูู Environment Variables
2. โ Convex deployment ูุดุท
3. โ ูููุฉ ุงููุฑูุฑ ูุนููุฉ ูู Convex

---

## ๐ ุงูุจูุงูุงุช ุงูุญุงููุฉ

### ุงููุฑูุน ุงูุงูุชุฑุงุถูุฉ:
```javascript
{
  branchId: "1010",
  branchName: "ูุจู",
  supervisorEmail: "labn@example.com",
  isActive: true
}

{
  branchId: "2020",
  branchName: "ุทููู",
  supervisorEmail: "tuwaiq@example.com",
  isActive: true
}
```

**ููุงุญุธุฉ:** ูุฅูุดุงุก ูุฐู ุงููุฑูุนุ ุดุบูู:
```bash
npx convex run setup:setupInitialData
```

---

## ๐ Sync Status (ุญุงูุฉ ุงููุฒุงููุฉ)

| ุงูููุฒุฉ | ุงูุญุงูุฉ | ุงูููุงุญุธุงุช |
|--------|--------|----------|
| **ูุงุนุฏุฉ ุงูุจูุงูุงุช** | โ ูุฑุจูุทุฉ | Convex Cloud |
| **Schema** | โ ูุนุฑูู | 18 ุฌุฏูู |
| **Functions** | โ ุฌุงูุฒุฉ | 30 ููู |
| **Frontend Connection** | โ ุฌุงูุฒ | ุนุจุฑ VITE_CONVEX_URL |
| **Auto-sync (ุทูุจุงุชโุณูู)** | โ ูุดุท | ุชููุงุฆู ุนูุฏ ุงููุจูู |
| **Auto-sync (ุทูุจุงุชโุฎุตู)** | โ ูุดุท | ุชููุงุฆู ุนูุฏ ุงููุจูู |
| **Password Security** | โ ูุญูู | Backend ููุท |
| **Duplicate Prevention** | โ ูุดุท | ููุน ุชูุฑุงุฑ ุงููุณูุฑุงุช |

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ

### 1. ุชุนููู ูููุฉ ุงููุฑูุฑ (ูุทููุจ):
```bash
npx convex env set MANAGE_REQUESTS_PASSWORD "Omar1010#"
```

### 2. ูุณุญ ุงูุจูุงูุงุช ุงููุฏููุฉ (ุงุฎุชูุงุฑู):
```bash
npx convex run setup:resetDatabase '{"confirmationText": "RESET_DATABASE"}'
```

### 3. ุงููุดุฑ ุนูู Cloudflare:
- ุงุชุจุน ุงูุฏููู ูู: `DEPLOY_MANUAL_STEPS.md`

---

## โ ุงูุฎูุงุตุฉ

| ุงูุณุคุงู | ุงูุฅุฌุงุจุฉ |
|--------|---------|
| ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุฑุจูุทุฉุ | โ **ูุนู** |
| ุฃูู ุชุชูุงุฌุฏุ | โ๏ธ **Convex Cloud** |
| ูุง ูู ุงูู URLุ | `https://smiling-dinosaur-349.convex.cloud` |
| ูู ุฌุฏููุ | ๐ **18 ุฌุฏูู** |
| ูู ููู backendุ | ๐ **30 ููู** |
| ูู ุฌุงูุฒุฉ ูููุดุฑุ | ๐ **ูุนูุ ุฌุงูุฒุฉ 100%** |

---

## ๐ ูู ุดูุก ุฌุงูุฒ!

ูุงุนุฏุฉ ุงูุจูุงูุงุช:
- โ ูุฑุจูุทุฉ
- โ ููุนุฏูุฉ ุจุงููุงูู
- โ ุฌุงูุฒุฉ ููุนูู
- โ ูุชุตูุฉ ุจุงูู Frontend
- โ ุฌุงูุฒุฉ ูููุดุฑ

**ููุท ูููุฐ ุงูุฃูุงูุฑ ูู "ุงูุฎุทูุงุช ุงูุชุงููุฉ" ููู ุดูุก ุณูุนูู!** ๐

---

**ุชู ุฅูุดุงุก ูุฐุง ุงูุชูุฑูุฑ ุจูุงุณุทุฉ:** Claude Code
