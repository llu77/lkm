# ๐๏ธ ุจููุฉ ุงููุดุฑูุน - ุฃูู ูููุดุฑ ูู ุดูุกุ
## Project Architecture - Where Everything is Deployed

**ุชุงุฑูุฎ:** 2025-10-25

---

## ๐ฏ ุงูุฅุฌุงุจุฉ ุงููุฎุชุตุฑุฉ:

ุงูุจุฑูุงูุฌ **ููุณู ุฅูู ุฌุฒุฆูู** ููููุดุฑ ูู **ููุงููู ูุฎุชูููู**:

| ุงูุฌุฒุก | ุฃูู ูููุดุฑ | ุงููุตู |
|------|-----------|-------|
| **Frontend** (ูุงุฌูุฉ ุงููุณุชุฎุฏู) | โ๏ธ **Cloudflare Pages** | ุงูุตูุญุงุช ูุงูุฃุฒุฑุงุฑ ูุงููุธูุฑ |
| **Backend** (ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุงูููุทู) | ๐ง **Convex Cloud** | ุงูุจูุงูุงุช ูุงูุญุณุงุจุงุช ูุงูุฃูุงู |

---

## ๐ ุชูุตูู ุงููุดุฑูุน:

### ูุฌูุฏุงุช ุงููุดุฑูุน:

```
/home/user/lkm/
โโโ src/                    โ Frontend (React)
โ   โโโ pages/             โ ุงูุตูุญุงุช
โ   โโโ components/        โ ุงูููููุงุช
โ   โโโ main.tsx           โ ููุทุฉ ุงูุจุฏุงูุฉ
โ
โโโ convex/                 โ Backend (Convex)
โ   โโโ schema.ts          โ ุจููุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช
โ   โโโ employees.ts       โ ูุธุงุฆู ุงูููุธููู
โ   โโโ payroll.ts         โ ูุธุงุฆู ุงูุฑูุงุชุจ
โ   โโโ zapier.ts          โ ุงูุชูุงููุงุช
โ
โโโ public/                 โ ูููุงุช ุซุงุจุชุฉ
โ   โโโ _redirects         โ ุฅุนุฏุงุฏุงุช Cloudflare
โ
โโโ dist/                   โ ูุงุชุฌ ุงูุจูุงุก (ูููุดุฑ)
โโโ package.json           โ ุฅุนุฏุงุฏุงุช ุงููุดุฑูุน
โโโ .env.local             โ ูุชุบูุฑุงุช ุงูุชุทููุฑ ุงููุญูู
```

---

## ๐ ููู ูุนูู ุงููุธุงู:

### ุงูุจููุฉ ุงููุงููุฉ:

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                         ุงููุณุชุฎุฏู                            โ
โ                    (ูุชุตูุญ ุงูููุจ)                            โ
โโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                       โ
                       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ              โ๏ธ Cloudflare Pages                            โ
โ           (Frontend - ูุงุฌูุฉ ุงููุณุชุฎุฏู)                       โ
โ                                                             โ
โ  ๐ ูุฌูุฏ src/                                               โ
โ  - ุงูุตูุญุงุช (pages/)                                         โ
โ  - ุงูููููุงุช (components/)                                   โ
โ  - React + TypeScript                                       โ
โ                                                             โ
โ  ๐ฆ ุจุนุฏ ุงูุจูุงุก:                                             โ
โ  - index.html, JavaScript, CSS                             โ
โ  - ูููุดุฑ ุนูู: your-site.pages.dev                          โ
โโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                       โ API Calls
                       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ              ๐ง Convex Cloud                                โ
โ            (Backend - ุงูุฎุงุฏู)                               โ
โ                                                             โ
โ  ๐ ูุฌูุฏ convex/                                            โ
โ  - ูุงุนุฏุฉ ุงูุจูุงูุงุช (18 ุฌุฏูู)                                โ
โ  - ุงูููุทู ุงูุจุฑูุฌู (mutations, queries)                      โ
โ  - ุงูุฃูุงู ูุงูุชุญูู                                           โ
โ                                                             โ
โ  ๐ ูุนูู ุนูู:                                               โ
โ  - smiling-dinosaur-349.convex.cloud                       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## 1๏ธโฃ Frontend - Cloudflare Pages

### ูุง ููุ

**ุงููุงุฌูุฉ** ุงูุชู ูุฑุงูุง ุงููุณุชุฎุฏู - ุงูุตูุญุงุชุ ุงูุฃุฒุฑุงุฑุ ุงูููุงุฆูุ ุฅูุฎ.

### ุงูููููุงุช:

```
src/
โโโ pages/
โ   โโโ dashboard/         โ ููุญุฉ ุงูุชุญูู
โ   โโโ employees/         โ ุตูุญุฉ ุงูููุธููู
โ   โโโ payroll/           โ ุตูุญุฉ ุงูุฑูุงุชุจ
โ   โโโ revenues/          โ ุตูุญุฉ ุงูุฅูุฑุงุฏุงุช
โ   โโโ manage-requests/   โ ุตูุญุฉ ุงูุทูุจุงุช
โ
โโโ components/
โ   โโโ ui/                โ ููููุงุช ุงููุงุฌูุฉ
โ   โโโ ...
โ
โโโ main.tsx               โ ููุทุฉ ุงูุจุฏุงูุฉ
```

### ุงูุชูููุงุช:

- **React** - ููุชุจุฉ ุจูุงุก ุงููุงุฌูุงุช
- **TypeScript** - ูุบุฉ ุงูุจุฑูุฌุฉ
- **Vite** - ุฃุฏุงุฉ ุงูุจูุงุก
- **Tailwind CSS** - ุงูุชุตููู

### ุฃูู ูููุดุฑุ

```
โ๏ธ Cloudflare Pages
URL: https://your-site.pages.dev
```

### ููู ูููุดุฑุ

```bash
# 1. ุงูุจูุงุก ูุญููุงู
npm run build
# ููุชุฌ: dist/ (ูููุงุช HTML, JS, CSS)

# 2. Cloudflare Pages ูุณุญุจ ูู Git
# - ูุฑุงูุจ ุงูุชุบููุฑุงุช ูู ุงููุฑุน
# - ูุจูู ุชููุงุฆูุงู: npm run build
# - ููุดุฑ: ูุญุชูู ูุฌูุฏ dist/
```

### ุงููุชุบูุฑุงุช ุงููุทููุจุฉ ูู Cloudflare:

```env
VITE_CONVEX_URL=https://smiling-dinosaur-349.convex.cloud
VITE_DEV_MODE=true
VITE_PAYROLL_PASSWORD=Omar1010#
VITE_EMPLOYEES_PASSWORD=Omar1010#
VITE_APP_URL=https://your-site.pages.dev
```

---

## 2๏ธโฃ Backend - Convex Cloud

### ูุง ููุ

**ุงูุฎุงุฏู** - ูุงุนุฏุฉ ุงูุจูุงูุงุชุ ุงูููุทู ุงูุจุฑูุฌูุ ุงูุฃูุงูุ ุงูุญุณุงุจุงุช.

### ุงูููููุงุช:

```
convex/
โโโ schema.ts              โ ุจููุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช (18 ุฌุฏูู)
โโโ employees.ts           โ ุฅุฏุงุฑุฉ ุงูููุธููู
โโโ payroll.ts             โ ุญุณุงุจ ุงูุฑูุงุชุจ
โโโ revenues.ts            โ ุฅุฏุงุฑุฉ ุงูุฅูุฑุงุฏุงุช
โโโ expenses.ts            โ ุฅุฏุงุฑุฉ ุงููุตุงุฑูู
โโโ employeeRequests.ts    โ ุทูุจุงุช ุงูููุธููู
โโโ zapier.ts              โ ุงูุชูุงููุงุช
โโโ emailSystem.ts         โ ูุธุงู ุงูุฅููููุงุช
โโโ setup.ts               โ ุฅุนุฏุงุฏ ุงูุจูุงูุงุช
```

### ูุงุนุฏุฉ ุงูุจูุงูุงุช:

```
18 ุฌุฏูู:
- branches            โ ุงููุฑูุน
- employees           โ ุงูููุธููู
- payrollRecords      โ ูุณูุฑุงุช ุงูุฑูุงุชุจ
- advances            โ ุงูุณูู
- deductions          โ ุงูุฎุตููุงุช
- bonuses             โ ุงูููุงูุขุช
- revenues            โ ุงูุฅูุฑุงุฏุงุช
- expenses            โ ุงููุตุงุฑูู
- employeeRequests    โ ุทูุจุงุช ุงูููุธููู
- ... ูุบูุฑูุง
```

### ุฃูู ูุนููุ

```
๐ง Convex Cloud
URL: https://smiling-dinosaur-349.convex.cloud
Dashboard: https://dashboard.convex.dev
```

### ููู ูููุดุฑุ

```bash
# Convex ูููุดุฑ ุชููุงุฆูุงู ุนูุฏ:
npx convex dev      # ููุชุทููุฑ
npx convex deploy   # ููุฅูุชุงุฌ

# ุฃู ุชููุงุฆูุงู ุนูุฏ Push ุฅูู Git
# (ุฅุฐุง ูุงู Convex ูุฑุชุจุท ุจู GitHub)
```

### ุงููุชุบูุฑุงุช ุงููุทููุจุฉ ูู Convex:

```bash
# ูููุงุช ุงููุฑูุฑ
npx convex env set MANAGE_REQUESTS_PASSWORD "Omar1010#"

# ุงูุฅููููุงุช
npx convex env set SUPERVISOR_EMAIL_1010 "labn@company.com"
npx convex env set SUPERVISOR_EMAIL_2020 "tuwaiq@company.com"
npx convex env set DEFAULT_SUPERVISOR_EMAIL "admin@company.com"

# ุงูููุงุชูุญ ุงูุงุฎุชูุงุฑูุฉ
npx convex env set RESEND_API_KEY "re_xxxxx"
npx convex env set ZAPIER_WEBHOOK_URL "https://hooks.zapier.com/..."
npx convex env set ANTHROPIC_API_KEY "sk-ant-api03-xxxxx"
```

---

## ๐ ููู ูุชูุงุตู Frontend ู Backendุ

### ุงูุงุชุตุงู:

```typescript
// ูู Frontend (src/):
import { useQuery, useMutation } from "convex/react";
import { api } from "../convex/_generated/api";

// ุงุณุชุฏุนุงุก ุจูุงูุงุช ูู Backend
const employees = useQuery(api.employees.getAll);

// ุฅุฑุณุงู ุจูุงูุงุช ุฅูู Backend
const addEmployee = useMutation(api.employees.create);
```

### ููู ูุนููุ

```
1. Frontend (Cloudflare) ูุณุชุฏุนู:
   api.employees.getAll()

2. ููุฑุณู ุทูุจ HTTP ุฅูู:
   https://smiling-dinosaur-349.convex.cloud/api/employees/getAll

3. Backend (Convex) ูุนุงูุฌ ุงูุทูุจ:
   - ูุชุญูู ูู ุงูุตูุงุญูุงุช
   - ููุฑุฃ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
   - ููุฑุฌุน ุงูุจูุงูุงุช

4. Frontend ูุณุชูุจู ุงููุชูุฌุฉ ููุนุฑุถูุง
```

---

## ๐ ุฑุญูุฉ ุงููุณุชุฎุฏู ุงููุงููุฉ:

```
ุงููุณุชุฎุฏู
    โ
1. ููุชุญ ุงููุชุตูุญ:
   https://your-site.pages.dev

2. Cloudflare Pages ููุฑุณู:
   - index.html
   - JavaScript files
   - CSS files

3. ุงููุชุตูุญ ูุนุฑุถ ุงููุงุฌูุฉ (Frontend)

4. ุงููุณุชุฎุฏู ูุถุบุท "ุนุฑุถ ุงูููุธููู"

5. Frontend ูุณุชุฏุนู:
   api.employees.getAll()

6. ุทูุจ HTTP ููุฑุณู ุฅูู:
   https://smiling-dinosaur-349.convex.cloud

7. Convex Backend:
   - ูุชุญูู ูู ุงูุตูุงุญูุงุช
   - ููุฑุฃ ุงูุจูุงูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
   - ููุฑุฌุน JSON

8. Frontend ูุณุชูุจู ุงูุจูุงูุงุช

9. ุงููุชุตูุญ ูุนุฑุถ ูุงุฆูุฉ ุงูููุธููู
```

---

## ๐ ุฌุฏูู ุงูููุงุฑูุฉ ุงูุดุงูู:

| ุงูููุงุฑูุฉ | Frontend (Cloudflare) | Backend (Convex) |
|----------|----------------------|------------------|
| **ุงููุฌูุฏ** | `src/` | `convex/` |
| **ุงููุบุฉ** | TypeScript + React | TypeScript |
| **ุงูุฏูุฑ** | ุงููุงุฌูุฉ ูุงูุนุฑุถ | ุงูุจูุงูุงุช ูุงูููุทู |
| **ุงูุชูููุงุช** | React, Vite, Tailwind | Convex Runtime |
| **ุงููุดุฑ** | Cloudflare Pages | Convex Cloud |
| **ุงูุฑุงุจุท** | `your-site.pages.dev` | `smiling-dinosaur-349.convex.cloud` |
| **ุงููุชุบูุฑุงุช** | ูู Cloudflare Dashboard | ุนุจุฑ `npx convex env set` |
| **ูุงุนุฏุฉ ุงูุจูุงูุงุช** | ูุง | ูุนู (18 ุฌุฏูู) |
| **ุงูุฃูุงู** | ูููุงุช ูุฑูุฑ ุจุณูุทุฉ | ูููุงุช ูุฑูุฑ ุขููุฉ ูู Backend |
| **ุงูุชุญุฏูุซุงุช** | ุนุจุฑ Git Push | ุนุจุฑ Git Push ุฃู `npx convex deploy` |

---

## ๐ ุฎุทูุงุช ุงููุดุฑ ุงููุงููุฉ:

### ุงูุฎุทูุฉ 1: ูุดุฑ Backend (Convex)

```bash
# ูุชุตู ูุณุจูุงู!
# URL: https://smiling-dinosaur-349.convex.cloud

# ููุท ุฃุถู ุงููุชุบูุฑุงุช:
npx convex env set MANAGE_REQUESTS_PASSWORD "Omar1010#"
npx convex env set SUPERVISOR_EMAIL_1010 "labn@company.com"
npx convex env set SUPERVISOR_EMAIL_2020 "tuwaiq@company.com"
npx convex env set DEFAULT_SUPERVISOR_EMAIL "admin@company.com"
```

โ **Backend ุฌุงูุฒ ููุนูู!**

### ุงูุฎุทูุฉ 2: ูุดุฑ Frontend (Cloudflare)

```
1. ุงุฐูุจ ุฅูู: Cloudflare Dashboard
2. Workers & Pages โ ูุดุฑูุนู
3. Settings โ Environment variables
4. ุฃุถู ุงููุชุบูุฑุงุช ุงูุฎูุณุฉ:
   - VITE_CONVEX_URL
   - VITE_DEV_MODE
   - VITE_PAYROLL_PASSWORD
   - VITE_EMPLOYEES_PASSWORD
   - VITE_APP_URL

5. Deployments โ Retry deployment

6. ุงูุชุธุฑ ุงูุจูุงุก (2-3 ุฏูุงุฆู)

7. ุงูุชุญ: https://your-site.pages.dev
```

โ **Frontend ุฌุงูุฒ ููุนูู!**

---

## ๐ก ููุงุฐุง ุฌุฒุฆูู ูููุตูููุ

### ุงูููุงุฆุฏ:

1. **ุงูุฃูุงู** ๐
   - ูููุงุช ุงููุฑูุฑ ุงูุญุณุงุณุฉ ูู Backend ููุท
   - Frontend ูุง ูุญุชูู ุนูู ุฃุณุฑุงุฑ

2. **ุงูุฃุฏุงุก** โก
   - Cloudflare: ุดุจูุฉ CDN ุนุงูููุฉ ุณุฑูุนุฉ
   - Convex: ูุงุนุฏุฉ ุจูุงูุงุช real-time

3. **ุงูุณูููุฉ** ๐ฏ
   - Cloudflare: ูุดุฑ ุชููุงุฆู ูู Git
   - Convex: ูุงุนุฏุฉ ุจูุงูุงุช ุจุฏูู ุฅุนุฏุงุฏ

4. **ุงูุชูููุฉ** ๐ฐ
   - Cloudflare Pages: ูุฌุงูู
   - Convex: ุฎุทุฉ ูุฌุงููุฉ ูุงููุฉ ููุจุฏุงูุฉ

---

## ๐ ููู ุชุชุญูู ูู ูู ุฌุฒุกุ

### ุชุญูู ูู Backend (Convex):

```bash
# 1. ุชุญูู ูู ุงูุงุชุตุงู
npx convex env list

# ูุฌุจ ุฃู ุชุฑู:
# Project: smiling-dinosaur-349
# Deployment: production

# 2. ุงูุชุญ Dashboard
https://dashboard.convex.dev/
# ุงุฎุชุฑ: smiling-dinosaur-349
# ุชุญูู: 18 ุฌุฏูู ููุฌูุฏุฉ
```

### ุชุญูู ูู Frontend (Cloudflare):

```
1. ุงูุชุญ: https://dash.cloudflare.com/
2. Workers & Pages โ ูุดุฑูุนู
3. Deployments โ ูุฌุจ ุฃู ุชุฑู:
   - Status: Success โ
   - Latest deployment

4. ุงูุชุญ ุงููููุน:
   https://your-site.pages.dev
```

---

## ๐ ููู ุงูุชูุซูู ุงููุฑุชุจุท:

| ุงูููู | ุงูููุถูุน |
|------|---------|
| `ALL_SECRETS_AND_KEYS.md` | ุฌููุน ุงููุชุบูุฑุงุช ูุงูููุงุชูุญ |
| `CLOUDFLARE_ENV_VERIFICATION.md` | ุงูุชุญูู ูู ูุชุบูุฑุงุช Cloudflare |
| `DATABASE_STATUS.md` | ุญุงูุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช (Convex) |
| `CONVEX_SECRETS_COMPLETE.md` | ูุชุบูุฑุงุช Convex |

---

## โ ุฃุณุฆูุฉ ุดุงุฆุนุฉ:

### ุณ1: ูู ูุฌุจ ุฑูุน ูู ุดูุก ุนูู ุงูุงุซูููุ

**ุฌ:** ูุง! ูู ุฌุฒุก ูู ููุงูู:
- `src/` โ Cloudflare
- `convex/` โ Convex (ูุฑููุน ูุณุจูุงู!)

### ุณ2: ููุงุฐุง Convex ูุฑุชุจุทุ

**ุฌ:** ูุฃู ุงููุดุฑูุน ูุณุชุฎุฏู Convex ูู Backend-as-a-Service:
- ูุงุนุฏุฉ ุจูุงูุงุช ุฌุงูุฒุฉ
- API ุฌุงูุฒ
- Real-time sync
- ุจุฏูู ุฅุนุฏุงุฏ ุณูุฑูุฑ!

### ุณ3: ูู ูููู ุงุณุชุฎุฏุงู ุฎูุงุฑุงุช ุฃุฎุฑูุ

**ุฌ:** ูุธุฑูุงู ูุนูุ ููู ูุญุชุงุฌ ุฅุนุงุฏุฉ ูุชุงุจุฉ ูุจูุฑุฉ:
- ุจุฏูุงู ูู Convex: Firebase, Supabase, MongoDB
- ุจุฏูุงู ูู Cloudflare: Vercel, Netlify, AWS

**ููู ุงูุญุงูู ูุนูู ููุชุงุฒ - ูุง ุชุบูุฑู!** โ

### ุณ4: ูุง ุฏุฎู Zapierุ

**ุฌ:** Zapier **ุงุฎุชูุงุฑู ุชูุงูุงู**:
- ููุณ ุฌุฒุก ูู ุงูุจููุฉ ุงูุฃุณุงุณูุฉ
- ููุท ููุชูุงููุงุช ุงูุฎุงุฑุฌูุฉ
- ุงููุธุงู ูุนูู 100% ุจุฏููู

---

## ๐ฏ ุงูุฎูุงุตุฉ:

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ              ุงููุดุฑูุน ุงููุงูู                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                              โ
โ  Frontend (src/)                             โ
โ  โ                                           โ
โ  npm run build                               โ
โ  โ                                           โ
โ  dist/                                       โ
โ  โ                                           โ
โ  โ๏ธ Cloudflare Pages                         โ
โ  ๐ https://your-site.pages.dev              โ
โ                                              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                              โ
โ  Backend (convex/)                           โ
โ  โ                                           โ
โ  npx convex deploy                           โ
โ  โ                                           โ
โ  ๐ง Convex Cloud                             โ
โ  ๐ https://smiling-dinosaur-349.convex.cloudโ
โ                                              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### ุงูุฅุฌุงุจุฉ ุงููุจุงุดุฑุฉ:

1. **Backend ูู Convex** โ (ูุฑููุน ูุณุจูุงู!)
2. **Frontend ูู Cloudflare** โ๏ธ (ูุญุชุงุฌ ูุชุบูุฑุงุช ุงูุจูุฆุฉ)

### ูุง ุชุญุชุงุฌ ูุนูู ุงูุขู:

```
โ Convex ุฌุงูุฒ (ููุท ุฃุถู ุงููุชุบูุฑุงุช)
โ๏ธ Cloudflare ูุญุชุงุฌ ุงููุชุบูุฑุงุช ุงูุฎูุณุฉ
```

---

**ูู ุฃูุถุญุช ุงูุตูุฑุฉ ุงูุขูุ ุฃู ุฌุฒุก ุชุฑูุฏ ุชูุตูู ุฃูุซุฑุ** ๐

---

**ุชู ุจูุงุณุทุฉ:** Claude Code
**ุงูุชุงุฑูุฎ:** 2025-10-25
**ุงูุญุงูุฉ:** โ ุชูุถูุญ ุดุงูู ููุจููุฉ
