# โ ุฏููู ุงูุชุญูู ูู ูุชุบูุฑุงุช ุงูุจูุฆุฉ
## Cloudflare Pages Environment Variables Verification Guide

**ุชุงุฑูุฎ ุงูุฅูุดุงุก:** 2025-10-25
**ุงูุญุงูุฉ:** ๐ง ุฏููู ุดุงูู ููุชุญูู ูุญู ุงููุดุงูู

---

## ๐ฏ ุงููุฏู

ูุฐุง ุงูุฏููู ูุณุงุนุฏู ูู:
1. โ ุงูุชุฃูุฏ ูู ุถุจุท ูุชุบูุฑุงุช ุงูุจูุฆุฉ ุจุดูู ุตุญูุญ
2. โ ุงูุชุญูู ูู ุชุญููููุง ุฃุซูุงุก ุงูุจูุงุก
3. โ ุงุฎุชุจุงุฑูุง ูู ุงููููุน ุงูููุดูุฑ
4. โ ุญู ุฃู ูุดุงูู ูุชุนููุฉ ุจูุง

---

## ๐ ุงููุชุบูุฑุงุช ุงููุทููุจุฉ (5 ูุชุบูุฑุงุช ุฃุณุงุณูุฉ)

### โ ุงููุงุฆูุฉ ุงููุงููุฉ:

```env
# 1. ุงุชุตุงู Convex (ูุทููุจ!)
VITE_CONVEX_URL=https://smiling-dinosaur-349.convex.cloud

# 2. ูุถุน ุงูุชุทููุฑ (ููุชุฌุงูุฒ ุงููุคูุช ูููุตุงุฏูุฉ)
VITE_DEV_MODE=true

# 3. ูููุฉ ูุฑูุฑ ุตูุญุฉ ุงูุฑูุงุชุจ
VITE_PAYROLL_PASSWORD=Omar1010#

# 4. ูููุฉ ูุฑูุฑ ุตูุญุฉ ุงูููุธููู
VITE_EMPLOYEES_PASSWORD=Omar1010#

# 5. ุฑุงุจุท ุงูุชุทุจูู (ุงุฎุชูุงุฑู - ููุฅุดุนุงุฑุงุช)
VITE_APP_URL=https://your-site.pages.dev
```

**โ๏ธ ููุงุญุธุงุช ูููุฉ:**
- โ **ูุง ุชุถูู** `VITE_MANAGE_REQUESTS_PASSWORD` - ุชู ูููู ููู backend!
- โ **ูุง ุชุถูู** `VITE_HERCULES_WEBSITE_ID` - ุงุฎุชูุงุฑู ูุบูุฑ ูุณุชุฎุฏู
- โ ูุฌุจ ุฃู ุชุจุฏุฃ ุฌููุน ุงููุชุบูุฑุงุช ุจู `VITE_` ูุชููู ูุชุงุญุฉ ูู Frontend

---

## ๐ง ุงูุฎุทูุฉ 1: ุฅุถุงูุฉ ุงููุชุบูุฑุงุช ูู Cloudflare

### ุทุฑููุฉ ุงูุฅุถุงูุฉ ุงูุตุญูุญุฉ:

1. **ุงุฐูุจ ุฅูู:**
   ```
   Cloudflare Dashboard โ Workers & Pages โ [ูุดุฑูุนู] โ Settings โ Environment variables
   ```

2. **ููู ูุชุบูุฑ:**
   - ุงุถุบุท **Add variable**
   - ุงูุชุจ **ุงุณู ุงููุชุบูุฑ** (ูุซู: `VITE_CONVEX_URL`)
   - ุงูุชุจ **ุงููููุฉ** (ูุซู: `https://smiling-dinosaur-349.convex.cloud`)
   - โ๏ธ **ููู ุฌุฏุงู!** ุงุฎุชุฑ: **"Production and Preview"** (ููุณ Production ููุท!)
   - ุงุถุบุท **Save**

3. **ูุฑุฑ ูููุชุบูุฑุงุช ุงูุฎูุณุฉ:**
   - `VITE_CONVEX_URL`
   - `VITE_DEV_MODE`
   - `VITE_PAYROLL_PASSWORD`
   - `VITE_EMPLOYEES_PASSWORD`
   - `VITE_APP_URL` (ุงุฎุชูุงุฑู)

### โ ุงูุชุญูู ูู ุงูุฅุถุงูุฉ:

ุจุนุฏ ุงูุฅุถุงูุฉุ ูุฌุจ ุฃู ุชุฑู:
```
VITE_CONVEX_URL          [ูุฎูู]    Production and Preview
VITE_DEV_MODE            [ูุฎูู]    Production and Preview
VITE_PAYROLL_PASSWORD    [ูุฎูู]    Production and Preview
VITE_EMPLOYEES_PASSWORD  [ูุฎูู]    Production and Preview
VITE_APP_URL             [ูุฎูู]    Production and Preview
```

---

## ๐ ุงูุฎุทูุฉ 2: ุฅุนุงุฏุฉ ุงููุดุฑ (Redeploy)

ุจุนุฏ ุฅุถุงูุฉ ุงููุชุบูุฑุงุชุ **ูุฌุจ** ุฅุนุงุฏุฉ ุงููุดุฑ:

### ุงูุทุฑููุฉ 1: ุนุจุฑ Dashboard
1. ุงุฐูุจ ุฅูู: `Deployments`
2. ุงุฎุชุฑ ุขุฎุฑ deployment ูุงุฌุญ
3. ุงุถุบุท **โฏ** (ุซูุงุซ ููุงุท)
4. ุงุถุบุท **Retry deployment**

### ุงูุทุฑููุฉ 2: ุนุจุฑ Git Push
```bash
git add .
git commit -m "fix: Update environment variables configuration" --allow-empty
git push -u origin claude/senior-engineer-profile-011CUSTeMoVrh97pTkgMgFXs
```

---

## ๐ ุงูุฎุทูุฉ 3: ูุญุต Build Log

ุจุนุฏ ุฅุนุงุฏุฉ ุงููุดุฑุ ุงูุชุญ Build log:

### โ ูุง ูุฌุจ ุฃู ุชุฑุงู:

```
11:19:57.915  Vite v5.x.x building for production...
11:19:58.000  โ built in X.XXs
```

### โ๏ธ ูุง **ูุง** ูุฌุจ ุฃู ุชุฑุงู:

```
โ (!) %VITE_HERCULES_WEBSITE_ID% is not defined
โ (!) %VITE_CONVEX_URL% is not defined
```

**ููุงุญุธุฉ:** ุงูููู ุงููุนููุฉ ูููุชุบูุฑุงุช **ูู ุชุธูุฑ** ูู ุงูู log (ูุฃุณุจุงุจ ุฃูููุฉ). ูุฐุง ุทุจูุนู! โ

---

## ๐งช ุงูุฎุทูุฉ 4: ุงุฎุชุจุงุฑ ุงููููุน ุงูููุดูุฑ

### ุงุฎุชุจุงุฑ 1: ูุชุญ ุงููููุน
```
https://your-site.pages.dev
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุงูุตูุญุฉ ุชูุชุญ ุจุฏูู ุฃุฎุทุงุก ูู Console
- โ ูุง ุชูุฌุฏ ุฑุณุงุฆู ุนู ูุชุบูุฑุงุช ุบูุฑ ูุนุฑููุฉ

### ุงุฎุชุจุงุฑ 2: ูุญุต Console (F12)

ุงูุชุญ Developer Tools (F12) ุซู ุงุฐูุจ ุฅูู Console:

**ุงูุฃุฎุทุงุก ุงูุชู ุชุนูู ูุดููุฉ ูู ุงููุชุบูุฑุงุช:**
```javascript
โ Error: Missing Convex deployment URL
โ Uncaught TypeError: Cannot read properties of undefined
โ VITE_CONVEX_URL is not defined
```

**ุฅุฐุง ูู ุชุฑู ูุฐู ุงูุฃุฎุทุงุก = ุงููุชุบูุฑุงุช ุชุนูู! โ**

### ุงุฎุชุจุงุฑ 3: ุงุชุตุงู Convex

ูู Consoleุ ุดุบูู:
```javascript
console.log(import.meta.env.VITE_CONVEX_URL);
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
```
https://smiling-dinosaur-349.convex.cloud
```

**ุฅุฐุง ุธูุฑุช `undefined` = ุงููุชุบูุฑ ุบูุฑ ูุญููู!** โ

### ุงุฎุชุจุงุฑ 4: ุชุฌุฑุจุฉ Dev Mode

1. ุงูุชุญ ุงููููุน
2. ูุฌุจ ุฃู ุชุฏุฎู **ุจุฏูู ุชุณุฌูู ุฏุฎูู** (ูุฃู `VITE_DEV_MODE=true`)
3. ุฅุฐุง ุทููุจ ููู ุชุณุฌูู ุฏุฎูู = `VITE_DEV_MODE` ุบูุฑ ูุญููู

### ุงุฎุชุจุงุฑ 5: ุชุฌุฑุจุฉ ุตูุญุฉ ูุญููุฉ

1. ุงุฐูุจ ุฅูู: `https://your-site.pages.dev/payroll`
2. ุฃุฏุฎู ูููุฉ ุงููุฑูุฑ: `Omar1010#`
3. ูุฌุจ ุฃู ุชุฏุฎู ุจูุฌุงุญ โ
4. ุฅุฐุง ูู ุชุนูู = `VITE_PAYROLL_PASSWORD` ุบูุฑ ูุญููู

---

## ๐ ุญู ุงููุดุงูู ุงูุดุงุฆุนุฉ

### ุงููุดููุฉ 1: "VITE_CONVEX_URL is not defined"

**ุงูุณุจุจ:** ุงููุชุบูุฑ ุบูุฑ ูุถุงู ุฃู ุบูุฑ ูุญููู

**ุงูุญู:**
1. โ ุชุฃูุฏ ูู ุฅุถุงูุฉ ุงููุชุบูุฑ ูู Cloudflare Pages
2. โ ุชุฃูุฏ ูู ุงุฎุชูุงุฑ "Production and Preview" (ููุณ Production ููุท)
3. โ ุฃุนุฏ ุงููุดุฑ (Retry deployment)
4. โ ุงูุณุญ ุงููุงุด: Ctrl+Shift+R

---

### ุงููุดููุฉ 2: ุงููุชุบูุฑุงุช ููุฌูุฏุฉ ููู ูุง ุชุนูู

**ุงูุณุจุจ:** ููุน ุงูุจูุฆุฉ ุฎุงุทุฆ

**ุงูุญู:**
1. ุงุญุฐู ุฌููุน ุงููุชุบูุฑุงุช ุงููุฏููุฉ
2. ุฃุนุฏ ุฅุถุงูุชูุง ูุงุญุฏุงู ูุงุญุฏุงู
3. **ุชุฃูุฏ ูู ุงุฎุชูุงุฑ "Production and Preview"** ููู ูุชุบูุฑ
4. ุฃุนุฏ ุงููุดุฑ

---

### ุงููุดููุฉ 3: Build Log ูุนุฑุถ ุชุญุฐูุฑุงุช ุนู ูุชุบูุฑุงุช ุบูุฑ ูุนุฑููุฉ

**ุงูุณุจุจ:** ุงููุชุบูุฑุงุช ุงููุณุชุฎุฏูุฉ ูู ุงูููุฏ ุบูุฑ ููุฌูุฏุฉ

**ุงูุญู:**
```bash
# ุงูุณุญ ุงููุชุบูุฑุงุช ุบูุฑ ุงููุณุชุฎุฏูุฉ ูู .env.local
# ุซู ุฃุนุฏ ุงูุจูุงุก
npm run build
```

---

### ุงููุดููุฉ 4: ูุง ูููู ุชุณุฌูู ุงูุฏุฎูู (Hercules OIDC Error)

**ุงูุณุจุจ:** Hercules ุบูุฑ ููุนูุฏ ุฃู ุบูุฑ ุถุฑูุฑู

**ุงูุญู ุงูุณุฑูุน:**
```env
# ูู Cloudflare Pages Environment Variables
VITE_DEV_MODE=true
```

**ุงููุชูุฌุฉ:** ุชุฌุงูุฒ ุงููุตุงุฏูุฉ ูููุงู (ููุชุทููุฑ) โ

---

### ุงููุดููุฉ 5: "Infinite loop detected" ูู _redirects

**ุงูุญุงูุฉ:** โ ุชู ุฅุตูุงุญูุง!

**ุงูุญู:** ุชู ุชุญุฏูุซ ููู `public/_redirects` ุจุงุณุชุฎุฏุงู:
```
/assets/*  /assets/:splat  200
/*  /index.html  200!
```

---

## ๐ Checklist ุงูููุงุฆู

### ูุจู ุงููุดุฑ:
- [ ] โ ุฃุถูุช ุฌููุน ุงููุชุบูุฑุงุช ุงูุฎูุณุฉ
- [ ] โ ุงุฎุชุฑุช "Production and Preview" ููู ูุชุบูุฑ
- [ ] โ ุญูุธุช ุงูุชุบููุฑุงุช (Save)
- [ ] โ ุฃุนุฏุช ุงููุดุฑ (Retry deployment)

### ุจุนุฏ ุงููุดุฑ:
- [ ] โ Build log ุฎุงูู ูู ุงูุฃุฎุทุงุก
- [ ] โ ูุง ุชูุฌุฏ ุชุญุฐูุฑุงุช ุนู ูุชุบูุฑุงุช ุบูุฑ ูุนุฑููุฉ
- [ ] โ ุงููููุน ููุชุญ ุจุฏูู ุฃุฎุทุงุก ูู Console
- [ ] โ `console.log(import.meta.env.VITE_CONVEX_URL)` ูุนุฑุถ ุงูู URL ุงูุตุญูุญ
- [ ] โ ูููู ุงูุฏุฎูู ููุตูุญุฉ ุงูุฑุฆูุณูุฉ (ุจูุถู Dev Mode)
- [ ] โ ูููู ุงูุฏุฎูู ูุตูุญุฉ Payroll ุจูููุฉ ุงููุฑูุฑ

---

## ๐ ุงูุฃูุงู (ููุฅูุชุงุฌ)

### โ๏ธ ูุจู ุงููุดุฑ ุงูููุงุฆู:

1. **ุบููุฑ `VITE_DEV_MODE` ุฅูู `false`:**
   ```env
   VITE_DEV_MODE=false
   ```

2. **ุนููู Hercules OIDC (ุฅุฐุง ููุช ุชุณุชุฎุฏูู):**
   ```env
   VITE_HERCULES_OIDC_AUTHORITY=https://accounts.hercules.app
   VITE_HERCULES_OIDC_CLIENT_ID=[your-actual-client-id]
   VITE_HERCULES_OIDC_SCOPE=openid profile email
   ```

3. **ุบููุฑ ูููุงุช ุงููุฑูุฑ:**
   ```env
   VITE_PAYROLL_PASSWORD=[ูููุฉ-ูุฑูุฑ-ูููุฉ]
   VITE_EMPLOYEES_PASSWORD=[ูููุฉ-ูุฑูุฑ-ูููุฉ-ุฃุฎุฑู]
   ```

4. **ูู Convex Backend:**
   ```bash
   npx convex env set MANAGE_REQUESTS_PASSWORD "[ูููุฉ-ูุฑูุฑ-ูููุฉ-ุฌุฏุงู]"
   ```

---

## ๐ฏ ุงูุฎูุงุตุฉ

| ุงููุชุบูุฑ | ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ | ูุทููุจุ | ุงูููุงุญุธุงุช |
|---------|-------------------|--------|-----------|
| `VITE_CONVEX_URL` | `https://smiling-dinosaur-349.convex.cloud` | โ ูุนู | ูุง ุชุบููุฑู |
| `VITE_DEV_MODE` | `true` | โ๏ธ ููุชุทููุฑ ููุท | `false` ููุฅูุชุงุฌ |
| `VITE_PAYROLL_PASSWORD` | `Omar1010#` | โ ูุนู | ุบููุฑู ูู ุงูุฅูุชุงุฌ |
| `VITE_EMPLOYEES_PASSWORD` | `Omar1010#` | โ ูุนู | ุบููุฑู ูู ุงูุฅูุชุงุฌ |
| `VITE_APP_URL` | `https://your-site.pages.dev` | ๐ง ุงุฎุชูุงุฑู | ููุฅุดุนุงุฑุงุช |

---

## ๐ ุฎุทูุงุช ุณุฑูุนุฉ ููุงุฎุชุจุงุฑ

```bash
# 1. ุงูุชุญ ุงููููุน
https://your-site.pages.dev

# 2. ุงูุชุญ Console (F12)
console.log(import.meta.env.VITE_CONVEX_URL);
# ูุฌุจ ุฃู ุชุฑู: https://smiling-dinosaur-349.convex.cloud

# 3. ุงูุชุญ Console (F12)
console.log(import.meta.env.VITE_DEV_MODE);
# ูุฌุจ ุฃู ุชุฑู: true

# 4. ุฌุฑุจ ุงูุฏุฎูู
# ูุฌุจ ุฃู ุชุฏุฎู ุจุฏูู ูุตุงุฏูุฉ โ
```

---

**ุชู ุจูุงุณุทุฉ:** Claude Code
**ุงูุชุงุฑูุฎ:** 2025-10-25
**ุงูุญุงูุฉ:** โ ุฌุงูุฒ ููุงุณุชุฎุฏุงู

---

## ๐ ุงูุฏุนู

ุฅุฐุง ูุง ุฒุงูุช ูุฏูู ูุดุงูู ุจุนุฏ ุงุชุจุงุน ูุฐุง ุงูุฏููู:
1. โ ุชุฃูุฏ ูู ุชูููุฐ ุฌููุน ุงูุฎุทูุงุช ุจุงูุชุฑุชูุจ
2. โ ุฑุงุฌุน Checklist ุงูููุงุฆู
3. โ ุชุฃูุฏ ูู ุฅุนุงุฏุฉ ุงููุดุฑ ุจุนุฏ ุฃู ุชุบููุฑ
4. โ ุงูุณุญ ุงููุงุด: Ctrl+Shift+R

**ูุจุฑูู! ูู ุดูุก ูุฌุจ ุฃู ูุนูู ุงูุขู!** ๐
